package com.example.android_projectview02.widget;import android.content.Context;import android.content.res.TypedArray;import android.graphics.drawable.Drawable;import android.text.TextUtils;import android.util.AttributeSet;import android.view.LayoutInflater;import android.view.View;import android.widget.ImageView;import android.widget.RelativeLayout;import android.widget.TextView;import com.example.android_projectview02.R;/** * @author Spider * msg:head 头布局 */public class TitleLayout extends RelativeLayout {    protected Context _context;    /*用来组合 DecorView 与 popWindow*/    protected View _rootView;    protected final int mMenuRes;    private final String[] _mText = new String[3];    private final Drawable[] _mDrawable = new Drawable[3];    private final int[] mResIds = new int[3];    public TitleLayout(Context context) {        this(context, null);    }    public TitleLayout(Context context, AttributeSet attrs) {        this(context, attrs, 0);    }    public TitleLayout(Context context, AttributeSet attrs, int defStyleAttr) {        super(context, attrs, defStyleAttr);        TypedArray typedArray = context.obtainStyledAttributes(attrs, R.styleable.lib_pub_titleLayout);        _mText[0] = typedArray.getString(R.styleable.lib_pub_titleLayout_lib_pub_tl_leftText);        _mText[1] = typedArray.getString(R.styleable.lib_pub_titleLayout_lib_pub_tl_rightText);        _mText[2] = typedArray.getString(R.styleable.lib_pub_titleLayout_lib_pub_tl_middleText);        _mDrawable[0] = typedArray.getDrawable(R.styleable.lib_pub_titleLayout_lib_pub_tl_leftDrawable);        _mDrawable[1] = typedArray.getDrawable(R.styleable.lib_pub_titleLayout_lib_pub_tl_rightDrawable);        _mDrawable[2] = typedArray.getDrawable(R.styleable.lib_pub_titleLayout_lib_pub_tl_middleDrawable);        mResIds[0] = typedArray.getResourceId(R.styleable.lib_pub_titleLayout_lib_pub_tl_leftRes, -1);        mResIds[1] = typedArray.getResourceId(R.styleable.lib_pub_titleLayout_lib_pub_tl_rightRes, -1);        mResIds[2] = typedArray.getResourceId(R.styleable.lib_pub_titleLayout_lib_pub_tl_middleRes, -1);        mMenuRes = typedArray.getResourceId(R.styleable.lib_pub_titleLayout_lib_pub_tl_menu, -1);        typedArray.recycle();        init(context);    }    protected void init(Context mContext) {        this._context = mContext;        _rootView = LayoutInflater.from(mContext).inflate(R.layout.lib_put_layout_title, this);        inflate(mContext, _rootView, _mText[0], _mDrawable[0], mResIds[0], R.id.tv_title_left, R.id.iv_title_left, ALIGN_PARENT_LEFT);        inflate(mContext, _rootView, _mText[1], _mDrawable[1], mResIds[1], R.id.tv_title_right, R.id.iv_title_right, ALIGN_PARENT_RIGHT);        inflate(mContext, _rootView, _mText[2], _mDrawable[2], mResIds[2], R.id.tv_title_title, R.id.iv_title_middle, CENTER_IN_PARENT);    }    /**     * context 上下文     * root 根路径     * text 显示文本     * drawable 显示图片     * res 加载的布局文件     * tv_id 设置显示的文本的id     * iv_id 设置显示的图片的id信息     * verb 设置子控件verb 并且addRule添加到viewGroup下面     */    private void inflate(Context _ct, View _rootV, String _tv, Drawable _dw, int _res, int _tv_id, int _iv_id, int verb) {        if (!TextUtils.isEmpty(_tv)) {            TextView tv = (TextView) _rootV.findViewById(_tv_id);            tv.setText(_tv);            tv.setVisibility(VISIBLE);        } else if (_dw != null) {            ImageView iv = (ImageView) _rootV.findViewById(_iv_id);            iv.setImageDrawable(_dw);            iv.setVisibility(VISIBLE);        } else if (_res != -1) {            View _view = LayoutInflater.from(_ct).inflate(_res, this, false);            addView(_view);            LayoutParams params = (LayoutParams) _view.getLayoutParams();            params.width = LayoutParams.MATCH_PARENT;            params.height = LayoutParams.WRAP_CONTENT;            params.addRule(verb);            _view.setLayoutParams(params);        }    }}